var gadash=gadash||{};gadash.auth=gadash.auth||{};gadash.auth.config={};gadash.userInfo={};gadash.isLoaded=!1;gadash.auth.SCOPES_=["https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/userinfo.email"];gadash.commandQueue_=[];
gadash.init=function(a){gadash.util.extend(a,gadash.auth.config);gadash.util.loadJs_(["https://www.google.com/jsapi?autoload="+encodeURIComponent('{"modules":[{"name":"visualization","version":"1","callback":"__globalCallback","packages":["corechart","table"]}]}'),"https://apis.google.com/js/client.js?onload=__globalCallback"],window.gadashInit_,!0)};
gadash.auth.onUnAuthorizedDefault=function(){document.getElementById("gadash-auth").innerHTML='<button id="authorize-button">Authorize Analytics</button>';document.getElementById("authorize-button").onclick=gadash.auth.authorize};
gadash.auth.onAuthorizedDefault=function(){var a="You are authorized";gadash.userInfo.email&&(a+=" as "+gadash.userInfo.email);document.getElementById("gadash-auth").innerHTML=a+' <button id="authorize-button">Logout</button>';document.getElementById("authorize-button").onclick=gadash.auth.accountLogout};gadash.auth.accountLogout=function(){window.document.location="https://accounts.google.com/logout"};
window.gadashInit_=function(){gapi.client.setApiKey(gadash.auth.config.apiKey);window.setTimeout(gadash.auth.checkAuth_,1)};gadash.auth.checkAuth_=function(){gapi.auth.authorize({client_id:gadash.auth.config.clientId,scope:gadash.auth.SCOPES_,immediate:!0},gadash.auth.handleAuthResult_)};
gadash.auth.handleAuthResult_=function(a){if(a)gapi.client.load("analytics",gadash.auth.config.version||"v3",gadash.auth.loadUserName_);else if("function"==gadash.util.getType(gadash.auth.config.onUnAuthorized)){if(!1!==gadash.auth.config.onUnAuthorized())gadash.auth.onUnAuthorizedDefault()}else gadash.auth.onUnAuthorizedDefault()};gadash.auth.loadUserName_=function(){gapi.client.request({path:"/oauth2/v2/userinfo"}).execute(gadash.auth.loadUserNameHander_)};
gadash.auth.loadUserNameHander_=function(a){gadash.userInfo=a;gadash.userInfo.email&&(gadash.userInfo.email=gadash.util.htmlEscape(gadash.userInfo.email));if("function"==gadash.util.getType(gadash.auth.config.onAuthorized)){if(!1!==gadash.auth.config.onAuthorized())gadash.auth.onAuthorizedDefault()}else gadash.auth.onAuthorizedDefault();gadash.isLoaded=!0;gadash.util.pubsub.publish(gadash.util.pubsub.libsLoaded)};
gadash.auth.authorize=function(){gapi.auth.authorize({client_id:gadash.auth.config.clientId,scope:gadash.auth.SCOPES_,immediate:!1},gadash.auth.handleAuthResult_);return!1};gadash.auth.executeCommandQueue_=function(){for(var a=0,b;b=gadash.commandQueue_[a];++a)b()};gadash.control=gadash.control||{};gadash.GaControl=function(a){this.settings=a;a=gadash.control.getConfigObjDetails(this.settings.configObjKey);this.configObj=a.configObj;this.configLastObj=a.configLastObj;this.configLastKey=a.configLastKey;return this};gadash.GaControl.prototype.getValue=function(){return this.settings.getValue.apply(this)};gadash.GaControl.prototype.getConfig=function(){this.configLastObj[this.configLastKey]=this.getValue();return this.configObj};
gadash.getTextInputControl=function(a,b){return new gadash.GaControl({id:a,configObjKey:b,getValue:gadash.control.getTextInputValue})};gadash.control.getTextInputValue=function(){return document.getElementById(this.settings.id).value};gadash.control.getConfigObjDetails=function(a){var b=configLastObj={};a=a.split(".");for(var c=0;c<a.length-1;++c){var d=a[c];configLastObj[d]={};configLastObj=configLastObj[d]}a=a[a.length-1];configLastObj[a]={};return{configObj:b,configLastObj:configLastObj,configLastKey:a}};gadash.util=gadash.util||{};gadash.util.convertDateFormat=function(a){0==(new String(a.getValue(0,0))).search(/^(20)\d{2}(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])$/)&&gadash.util.convertToMMMd(a)};gadash.util.convertToMMMd=function(a){for(var b=a.getNumberOfRows(),c=0;c<b;c++)a.setValue(c,0,gadash.util.stringDateToString(a.getValue(c,0)));return a};
gadash.util.stringDateToString=function(a){if(0==a.search(/^(20)\d{2}(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])$/)){var b={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"}[a.substring(4,6)];a=a.substring(6,8);10>a&&(a=a.substring(1,2));a=b+" "+a}return a};gadash.util.bindMethod=function(a,b){return function(){return b.apply(a,arguments)}};
gadash.util.lastNdays=function(a){var b=new Date;b.setDate((new Date).getDate()-a);a=b.getFullYear();var c=b.getMonth()+1;10>c&&(c="0"+c);b=b.getDate();10>b&&(b="0"+b);return[a,c,b].join("-")};gadash.util.lastNweeks=function(a){var b=new Date,c=new Date;a*=7;c.setDate(b.getDate()-a);a=c.getFullYear();b=c.getMonth()+1;10>b&&(b="0"+b);c=c.getDate();10>c&&(c="0"+c);return[a,b,c].join("-")};
gadash.util.lastNmonths=function(a){var b=new Date;if(0>=a)return[b.getFullYear(),b.getMonth()+1,b.getDate()].join("-");var c=Math.floor(a/12);a%=12;0<c&&b.setFullYear(b.getFullYear()-c);0<a&&(a>=b.getMonth()?(b.setFullYear(b.getFullYear()-1),a=12-a,b.setMonth(b.getMonth()+a)):b.setMonth(b.getMonth()-a));c=b.getDate();c=10>c?"0"+c:c;a=b.getMonth()+1;a=10>a?"0"+a:a;return[b.getFullYear(),a,c].join("-")};
gadash.util.stringToDate=function(a){var b=a.substring(0,4),c=a.substring(4,6);a=a.substring(6,8);10>c&&(c=c.substring(1,2));c-=1;10>a&&(a=a.substring(1,2));return new Date(b,c,a)};gadash.util.formatGAString=function(a){var b=a.substring(3),b=b.charAt(0).toUpperCase()+b.slice(1);for(a=1;a<b.length;a++)if(b.charAt(a)==b.charAt(a).toUpperCase()){var c=b.substring(0,a),b=b.substring(a,b.length),b=[c,b].join(" ");a++}return b};
gadash.util.extend=function(a,b){for(var c in a)null!==a[c]&&void 0!==a[c]&&("object"==gadash.util.getType(a[c])?(b[c]=b[c]||{},gadash.util.extend(a[c],b[c])):b[c]=a[c])};gadash.util.getType=function(a){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Array]":"array","[object Date]":"date","[object RegExp]":"regex","[object Function]":"function","[object Object]":"object"}[Object.prototype.toString.call(a)]};
gadash.util.htmlEscape=function(a){if(!/[&<>\"]/.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(/&/g,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(/</g,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(/>/g,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(/"/g,"&quot;"));return a};gadash.util.loadJs_Resource=function(a,b){var c=document.createElement("script");c.async=!0;c.src=a;b&&(c.onload=b);var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)};window.__globalCallback={};
gadash.util.loadJs_=function(a,b,c){b=gadash.getIncrementalCallback(a.length,b);c&&(window.__globalCallback=b);for(var d=0,f;f=a[d];++d)c?gadash.util.loadJs_Resource(f):gadash.util.loadJs_Resource(f,b)};gadash.getIncrementalCallback=function(a,b){var c=0;return function(){++c;c>=a&&b()}};gadash.util.getElement=function(a){return"string"==gadash.util.getType(a)?document.getElementById(a):a};gadash.util.getLoaderUri=function(){return"data:image/gif;base64,R0lGODlhIAAgAPYAAP///3d3d/v7++/v7+bm5ufn5/X19fz8/Pn5+djY2LCwsJubm6CgoL+/v+jo6Pj4+ODg4J+fn3l5eYaGhu7u7vPz88rKys/Pz/f398DAwISEhJOTk9nZ2ezs7Orq6re3t5aWloyMjI6OjtDQ0LW1tX5+fomJidHR0aSkpPT09L6+voiIiH19fdLS0oWFheHh4YKCgnx8fIuLi729vd7e3peXl4CAgLS0tMTExMPDw4ODg8HBwdfX15CQkNra2sXFxZqamunp6c7Ozt3d3eLi4uPj46ampoqKisLCwrm5ubOzs7u7u3t7e9vb29PT07i4uMbGxq6urq+vr9bW1uvr66qqqtXV1dTU1La2tuTk5Ly8vKWlpZGRkd/f3/Dw8Pr6+vb29vHx8Y2Njaurq6ioqPLy8rKysgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAIAAgAAAH/4AAgoOEhYaHiImKi4yNjQeGCCkCjoYpBDQFKYMCHDMElYQeKgw1DA1BkAg5QAmhghUfKxK0Jh8VBwcOPBWFFR0PiQIJILTGGwmQALmEKUtGTgiIDxYhxrUW0ocEGyUKBogIFyLXEiEnlIcVz9GIBwQMLNcMRMrqHsGJBiMLGjYuC4RgeFXoAAYPLVSQ2OEDHMFBCCBkIJGBwwAD6Rwx45QggoYSAF+8cmDBAoVBAxSUu5GvUYUnE0zscEhgQbkFvRxRMEJLQc4CDMoxyNkIA5QaC0YMBGCgwQRjLnBkbGSACBGHyxwo2GBiA4mTDwtS4HAigQOMYQ89eGEhBy97iZg2uoOAQsYEED82xSVigcZSdSRgGAMyJC6HGi42ZEPUAUUMYyFGKEOAQRtTEiVoRaGCqIKCzLRA+AAgoAiSJCdyYlABg0kJKUQLdtSgo8eMAbqMwCjRwwK4d0ZqGJkytdCDBDM+WOhwQJwMY0Y8CDrgoUkBy4gEVKiQD4GQI7RKRCcENxQB3bwt/E1LmsYMJSbZFxJggLujQAAh+QQJCgAAACwAAAAAIAAgAAAH/4AAgoOEgwcVVFQpB4WNjo4PEEkoKEsvD4+ZjQI0RhoSEhpGEAKapgAVSxOgoBNJFaeFBg4EFQJBRkysoEZBsYIHDg0oDFhNREa7EiW9vwADJKsSOihOSdKgLq+CFRWMjwI8G7sTGTwoMKA2W0OlqUkDmQhCIcokFUVaDAwzBAjcUaI4yCTAyjhWK3JgQpAiBYJvAG4FKZWJgpJPEmAwgOBM3osnDCIoSIChYyMMBYYQCUKg1j+ThDA4MbIAhQVbMAsdGBKhBKgNJyDGQgDBAgGKD35gK0ECk7MORkIogAXgAY6lTTt6iCKDRDwAB5r0lMBiQwuhpxB0MUoRgAEnVZxq3syJFgDKIQQM5NQk4IAADA/q7nXLAQkUf6ceOOR7ZcGKI1GyCB6UwgKJESUfVVCQTsIRKE4dHbDSo0SNJhWjsJqAJHPEtmBHmJDAZUomDDhEMIGxIEGpAwWECCnQtoOSCEu+asYRRcoVvQA8SDGxIgoVQhVqmTqAgQJOsDx6gOrBY7LJISBAgRhivmOFHCFzUB2MvUiR+fQHBwIAIfkECQoAAAAsAAAAACAAIAAAB/+AAIKDhIUAB4aJiokHFUVdQQ+Lk4YHDksLNUYjFZSeABRPKxISJUAtkgcPGAieDwMFAwgCPkBMpBI6HwMYRBY4Jw4CixhOClsKPBUtXLilUQQnWyImGwovX4m0CyUlOgwJTRHOLk8XESW4LgpUiQYNOrgmOUEqR6QsEU4ZJs4SCxwQFUqRBAYuDRkMVLBghMGHLhWWxHO2ocWwQghOcIkhgQkIJ4gOKMQA4AGUe7hYAPFxsVAFFQt6RMgxQFEXFDbkfeigCEGFJi2GVBBoCMMVIz1CbLhBpJUhBBhCEu1ZwIkQHhSmCsJAQIiQAi09IZilrcmWEDKMQPhUSFW2QQa1VGggpUGLU7YAPEBxYmBQBRLpSim4y5YGil2DEFjg0m2DhbCfKnBoSqgCDiNGLNTEO+lACg8OOnEeTdoTBgNaSw86QADJEh+SKKUg4CU1oQ5RNMAACLnQgxw1lFCYBGEDKRNQYitKoQBGhCKTgmyBUeLj3QcUhg4ScEUKFNGKHjiJknkzAAwjoiQhQNQnSUoIKATpO8jBuCM53qsmVIBBiSM46LefIAZcoB57AxaCQXaEJUhaIAAh+QQJCgAAACwAAAAAIAAgAAAH/4AAgoOEhQcCB4WKi4yCBgRTTRSJjZWFDxdbG0BLBJSWlQdEDCUSEmIZFaCKCGAIgggtYqYSJVEOAhVFEEEPlgMtGRdBAghOIrS2BQQqDAtRLSmNFSobGj1JHQceYzC1GxYvWEemJRFTr4tFC7Q1CQAITQoLDBYePDW0EhpJqosvNZiY2mBF0IEKHSg8ENCihz5bHhhVUGCihIkoBBg1WVDKlIkZ/hQdeKHCyJImvhYN0NIjhgQYKDikW3TQQYWZigQ4yGGEgQIhQVLgXLUIQ5AuV3AsyXBlwCcwHQYMtXQAgoIeLkwAQeJvAI4tRloYIAqgAgkX+jZcACBgCoiXDLUyEiWQTx8MBfAshBjogywBhw/JADhAA8WEIwqCkA0SgYU+HUkEpeDRAAeRqY0e5GhpCgaDIYMQpDDwiaiHHQt6bIhyZSxZRge7OJlCAMNrUAdKK6pQIIxuRohAdViyQIEnS0GQJMA86MAVLqcspGyUYIEK17B9RNAB5MpMASlsEwJGRIClFC1ICAkp4EUDCyEFBQeFoMKDTwZUHInQ5fftQQ9YUANG/1VCAQcviFcgcP4tWGAgACH5BAkKAAAALAAAAAAgACAAAAf/gACCg4SFhoeIiQAYQURBD4qRhQ88UREKPBiSkgcFRjASMFFFB4OlmwgPpwc+GxKvQDwCAAgdRUGaiQcOFxZEkAcvESUSJQxdAgYJCgxRIxWJHVg9MlEQpRU/QGILFhUIQ1s6oQtWkIdDNa89FucVHBZN0Bg/Mq8SKzPQhgdEwxIbTpwTdAqAgRxH7rl4MgBRCgsoIjToULAQAh4LSjApAUJILn4ViNAYUNFQBQsMNkTYQVHRgZKHBFR4YYUHgQEYYG4CmWDHEgsEEBR6uXMQghYoTGgQoYDAqQdELFjZt7ODEWKvTGRIAWCXAjEgLgyUBKHHvWJGOnSFsECCCxVcyHcScXWvRBQqgjwkqcFgitCdA6KMeyUGSS4BHXy8MFCUVoIqXEKASFKg4AEBOhEdMBAEQgsoP1oEmdWYEAICOaKgUGDBQc7ShYJgEfEKxgIhcQ8d6PDCS2YEFjYwuSeKAGlDHT4sQEK1kAEtg++BsHK8EIEtExSoPZRiSfRXNaZUJ1Thwo1MhAS8Bs7lrA4jpBI9+Jb+BVBBQZ70sFFCQwTcpT0AkROlCFAADlEYocAJze0kgH0OmFKBAwVQ8FFpAqgC24YcdhgIACH5BAkKAAAALAAAAAAgACAAAAf/gACCg4SFhoeIiYIHD1+Kj4cYL0JTFAKQmAddRj1AOQOYkA9QJhIlW0QHgweqkAeXgw8WMqZGBKoHFC9EFa2IBl1XQbACRWYgDBYVAAcESgsRM0G+hQIJWyBJHoMIDlMQvQApSLQSG0IYiBgNExILPtSFFAolEhIrWsuHCC0RPQq3ElVoUIoFF2UCr1jo8kARAghSNtTAQgDWoQMIMFhM9IDAFR4OGobKxOrBg40jESEIcuXECwOEDmCogCAlAAEQonDpkQwmswpCZjQRGWrAk3amUEAQhGAIChkfQI0kgKKevR4nBhFQEAGKvlBBolhlAoIHtwJdpI5MIQSIDhgiyT50KBTP1QMPFqJE2VGkps1BAgb4GNGiCwECFVCmPBAkw4IeIG4wfFS3UAoLG+xJCJFkrkAeBPwCAFNg14AvBaLA0CwhwpDKN4cwyFCGGYUfDLiAUJCgSVXWC5rAZoxkCoYDFTBrnmDkwo0VmmFEIaDoQIqGOH9rlpGhRZUjOiZEuJAilAAeNVhLgIHFwZAdCpJM+QpJQJMITFjrmEGzQocK6aQUhBIuaBYDCC0Q9RcADzRhhAklwACCCp4tGMsLGUShxAUdKFZIIAAh+QQJCgAAACwAAAAAIAAgAAAH/4AAgoOEhYaHiImKi4wCFR0pB4yTggUZChYVlIwIFhsaKBCSm4mdIiULNKMAGBQUD4wYYbCDBElGUJqCFRZSCk4pigZXWjwYgwgUBRUCggddDDAuRkTNiARGRwpBig8jIRISNTwIiQMqEUgDis8MLiZRRauGAg4cQdaJBk4kT8aLBwTMS/SAwgBapBIq7DaAgoGBACBOqiAkSpQfHlY9cABB16YHToDAkLABioFBA3ZEaSIxUYUMLsKViEJlUIoTOwi0RGTgBzgJLpR4ZFWhHKkDL6L0EIGixTFDAXcaegDhRw4eQwUJoOBjxBUCJxcJEIAgRQWEg+qpWMBlQ5QrYdEPpSiSoGPLCkh6lAinwQiNfIQqjDBSg0GODhAP0EARrnGIHBUOgPFSFAACDhFGlthgIVghBFNqxGgsQQMWBzRUGMEUpAKUnxJ0KOkAdQgD0hJWLJlixESJElxUELHQo/GED7QNeXhigonMBRYyyCC9oAUHIy5KwAAyIi4hBEOicJkQIgKUISR0kBZhYcAUKSiMWKCQCMPwGTmmuJqxgvSGFghgQEAXBETGDgYVpFDOAzwssFduUhAwSEALpWDBFhvUoMAQaC0kiH1XcNCBUYoEAgAh+QQJCgAAACwAAAAAIAAgAAAH/4AAgoOEhYaHiImKi4wAB18HjZIADwQ+HZGTi0FPKFAVmotEKCEfA4QPBg+Nj5mCFRZPPBiDFS0NLaCKAh0+A64CKRS0ggJDDCYMCQiKBhZbLcSICE5cEhsXq4kPTTtEzIkHBQoRJASuiBgV2ooIlgTshQcCCAIH6Lv26Q4+Vl0UAkIdejAESwQgKHZ4wLfoAAYMAQEIIBJlhQQJJUTk0NXInYUcPkClsNDjoskIRBgiCoJFxJEtHBAM+ODC5EUuHFQaOjBkwUUxPwxUaGDCpgQQTSI2JGBERwkQQh48uBKhhEkYChaySjEiCooMDu51QFJjAgwZDKZIa1SBSJcO4OB4nVCBRYUFHwUqKGV0z9CDCgVOfNgSBQeBvYUEVOigNxGCF1GOlIDBRUuHaUR2KMjwDVEKHEdsApkCjtABB1gkH1FQQGWFJzpsirBQIUUQAlRWCfDh8+ICHqUJVchQ9CKTDSOCXJCC4kMTDAiGVMW4wEfwQQg4MNDBRMLqJiMWwJBgIsqLBx1UbDCxYYnWQ7aiRGBAggMBmia5WDCAoICFJRYQcJ1pFRDAQRMO2KZEbBf1AIUBACBQAQWNLSLAhZHA0kN3JUTAQzwCRVjAEkBwwYAFFIRoCC9XXBCSToQEAgA7AAAAAAAAAAAA"};
gadash.util.pubsub=gadash.util.pubsub||{};gadash.util.pubsub.libsLoaded="LIBS_LOADED";gadash.util.pubsub.map={};gadash.util.pubsub.subscribe=function(a,b){gadash.util.pubsub.map[a]||(gadash.util.pubsub.map[a]=[]);gadash.util.pubsub.map[a].push(b)};gadash.util.pubsub.publish=function(a){if(gadash.util.pubsub.map[a]&&gadash.util.pubsub.map[a].length)for(var b=0,c;c=gadash.util.pubsub.map[a][b];++b)c()};gadash.util.save=function(a,b){localStorage&&JSON&&localStorage.setItem(a,JSON.stringify(b))};
gadash.util.load=function(a){if(localStorage&&JSON)return JSON.parse(localStorage.getItem(a))};gadash.util.displayError=function(a){var b=document.getElementById("errors");b||(b=document.createElement("div"),b.style.color="red",b.setAttribute("id","errors"),b.innerHTML="ERRORS:<br>",document.body.appendChild(b));b.innerHTML+=gadash.util.htmlEscape(a)+"<br>"};gadash=gadash||{};gadash.commandQueue_=[];gadash.executeCommandQueue_=function(){for(var a=0,b;b=gadash.commandQueue_[a];++a)b()};gadash.util.pubsub.subscribe(gadash.util.pubsub.libsLoaded,gadash.executeCommandQueue_);gadash.GaQuery=function(a){this.config={};this.setConfig(a);return this};gadash.GaQuery.prototype.setConfig=function(a){gadash.util.extend(a,this.config);return this};
gadash.GaQuery.prototype.execute=function(a){a&&this.setConfig(a);gadash.isLoaded?this.executeFunction_():(gadash.util.bindMethod(this,this.executeFunction_),gadash.commandQueue_.push(renderFunction));return this};gadash.GaQuery.prototype.executeFunction_=function(){this.executeHandlers_("onRequest","onRequestDefault")};
gadash.GaQuery.prototype.callback=function(a){this.executeHandlers_("onResponse","onResponseDefault");a.error?this.executeHandlers_("onError","onErrorDefault",a.error):this.executeHandlers_("onSuccess","onSuccessDefault",a)};gadash.GaQuery.prototype.executeHandlers_=function(a,b,c){a=this.config[a];b=this.config[b];"function"==gadash.util.getType(a)?!1!==gadash.util.bindMethod(this,a)(c)&&b&&gadash.util.bindMethod(this,b)(c):b&&gadash.util.bindMethod(this,b)(c)};
gadash.onErrorDefault=function(a){var b=document.getElementById("errors");b||(b=document.createElement("div"),b.style.color="red",b.setAttribute("id","errors"),b.innerHTML="ERRORS:<br />",document.body.appendChild(b));b.innerHTML+=" error: "+a.code+" "+a.message+"<br />"};gadash.core=gadash.core||{};gadash.getCoreQuery=function(a){return(new gadash.GaQuery({onRequestDefault:gadash.core.onRequestDefault,onErrorDefault:gadash.onErrorDefault})).setConfig(a)};gadash.core.onRequestDefault=function(){this.config.actualQuery=gadash.core.getCoreQueryObj(this.config);gapi.client.analytics.data.ga.get(this.config.actualQuery).execute(gadash.util.bindMethod(this,this.callback))};
gadash.core.getCoreQueryObj=function(a){var b={};a.query.ids&&(b.ids=a.query.ids);a.query.metrics&&(b.metrics=a.query.metrics.split(" ").join(","));a.query.dimensions&&(b.dimensions=a.query.dimensions.split(" ").join(","));a.query.filters&&(b.filters=a.query.filters);a.query.segment&&(b.segment=a.query.segment);a.query.sort&&(b.sort=a.query.sort.split(" ").join(","));a.query.startIndex&&(b["start-index"]=a.query.startIndex);a.query.maxResults&&(b["max-results"]=a.query.maxResults);a.query.lastNdays?
(b["end-date"]=gadash.util.lastNdays(0),b["start-date"]=gadash.util.lastNdays(a.query.lastNdays)):a.query.startDate&&a.query.endDate?(b["end-date"]=a.query.endDate,b["start-date"]=a.query.startDate):(b["end-date"]=gadash.util.lastNdays(0),b["start-date"]=gadash.util.lastNdays(28));return b};
gadash.core.setDefaultDates=function(a){a.lastNdays?(a.query.endDate=gadash.util.lastNdays(0),a.query.startDate=gadash.util.lastNdays(a.lastNdays)):a.query.startDate&&a.query.endDate||(a.query.endDate=gadash.util.lastNdays(0),a.query.startDate=gadash.util.lastNdays(28))};gadash.gviz=gadash.gviz||{};gadash.gviz.onRequestDefault=function(){gadash.util.getElement(this.config.elementId).innerHTML=['<div class="ga-loader" style="color:#777;font-size:18px;overflow:hidden"><img style="display:block;float:left" src="',gadash.util.getLoaderUri(),'"><div style="margin:6px 0 0 12px;float:left">Loading...</div></p>'].join("");gadash.util.bindMethod(this,gadash.core.onRequestDefault)()};
gadash.gviz.onResponseDefault=function(){gadash.util.getElement(this.config.elementId).innerHTML=""};gadash.gviz.onSuccessDefault=function(a){a=gadash.gviz.getDataTable(a,this.config.type);var b=gadash.gviz.getChart(this.config.elementId,this.config.type);gadash.gviz.draw(b,a,this.config.chartOptions)};
gadash.gviz.getDataTable=function(a,b){var c=b||!1,d=new google.visualization.DataTable,f=a.columnHeaders.length,g;a.rows&&a.rows.length?g=a.rows.length:gadash.util.displayError("No rows returned for that query.");for(var e=0;e<f;e++){var h=a.columnHeaders[e].dataType,m=a.columnHeaders[e].name,h="ga:date"==m&&"ColumnChart"!=c&&"BarChart"!=c?"date":"STRING"==h?"string":"number";d.addColumn(h,gadash.util.formatGAString(m))}for(e=0;e<g;e++){for(var l=[],k=0;k<f;k++)m=a.columnHeaders[k].name,h=a.columnHeaders[k].dataType,
"ga:date"==m&&"ColumnChart"!=c&&"BarChart"!=c?l.push(gadash.util.stringToDate(a.rows[e][k])):"INTEGER"==h?l.push(parseInt(a.rows[e][k])):"CURRENCY"==h?l.push(parseFloat(a.rows[e][k])):"PERCENT"==h||"TIME"==h||"FLOAT"==h?l.push(Math.round(100*a.rows[e][k])/100):l.push(a.rows[e][k]);d.addRow(l)}for(e=0;e<f;e++)h=a.columnHeaders[e].dataType,"CURRENCY"==h&&(new google.visualization.NumberFormat({fractionDigits:2})).format(d,e);return d};
gadash.gviz.getChart=function(a,b){var c=gadash.util.getElement(a);return google.visualization[b]?new google.visualization[b](c):new google.visualization.Table(c)};gadash.gviz.draw=function(a,b,c){gadash.util.convertDateFormat(b);gadash.gviz.createDateFormater(b);a.draw(b,c)};gadash.gviz.createDateFormater=function(a){(new google.visualization.DateFormat({pattern:"MMM d"})).format(a,0)};
gadash.gviz.coreChartConfig={onRequestDefault:gadash.gviz.onRequestDefault,onResponseDefault:gadash.gviz.onResponseDefault,onSuccessDefault:gadash.gviz.onSuccessDefault,onErrorDefault:gadash.onErrorDefault};gadash.getCoreChart=function(a){return(new gadash.GaQuery).setConfig(gadash.gviz.coreChartConfig).setConfig(a)};gadash.getCoreLineChart=function(a){var b=gadash.gviz.getCommonConfigFromArgs(arguments);return(new gadash.GaQuery(gadash.gviz.coreChartConfig)).setConfig(b.baseConfig).setConfig(gadash.gviz.defaultGvizChartOptions).setConfig(gadash.gviz.areaChart).setConfig(b.userConfig)};
gadash.getCorePieChart=function(a){var b=gadash.gviz.getConfigFromArgs({elementId:"",query:{ids:"",metrics:"",sort:"",dimensions:"",maxResults:5}},[function(a,b){a.elementId=b},function(a,b){a.query.metrics=b;a.query.sort="-"+b},function(a,b){a.query.dimensions=b},function(a,b){a.query.ids=b}],arguments);return(new gadash.GaQuery(gadash.gviz.coreChartConfig)).setConfig(b.baseConfig).setConfig(gadash.gviz.defaultGvizChartOptions).setConfig(gadash.gviz.pieChart).setConfig(b.userConfig)};
gadash.getCoreBarChart=function(a){var b=gadash.gviz.getCommonConfigFromArgs(arguments);return(new gadash.GaQuery(gadash.gviz.coreChartConfig)).setConfig(b.baseConfig).setConfig(gadash.gviz.defaultGvizChartOptions).setConfig(gadash.gviz.barChart).setConfig(b.userConfig)};gadash.getCoreColumnChart=function(a){var b=gadash.gviz.getCommonConfigFromArgs(arguments);return(new gadash.GaQuery(gadash.gviz.coreChartConfig)).setConfig(b.baseConfig).setConfig(gadash.gviz.defaultGvizChartOptions).setConfig(gadash.gviz.columnChart).setConfig(b.userConfig)};
gadash.gviz.getConfigFromArgs=function(a,b,c){for(var d,f=0;f<c.length;++f){var g=c[f];if("object"==gadash.util.getType(g)){d=g;break}else if(f<b.length)b[f](a,g)}return{baseConfig:a,userConfig:d}};gadash.gviz.getCommonConfigFromArgs=function(a){return gadash.gviz.getConfigFromArgs({elementId:"",query:{ids:"",metrics:"",dimensions:"ga:date"}},[function(a,c){a.elementId=c},function(a,c){a.query.metrics=c},function(a,c){a.query.ids=c}],a)};
gadash.gviz.defaultGvizChartOptions={chartOptions:{height:300,width:450,fontSize:12,curveType:"function",chartArea:{width:"100%"},titleTextStyle:{fontName:"Arial",fontSize:15,bold:!1}}};gadash.gviz.lineChart={type:"LineChart",chartOptions:{pointSize:6,lineWidth:4,areaOpacity:0.1,legend:{position:"top",alignment:"start"},colors:["#058dc7","#d14836"],hAxis:{format:"MMM d",gridlines:{color:"transparent"},baselineColor:"transparent"},vAxis:{gridlines:{color:"#efefef",logScale:"true",count:3},textPosition:"in"}}};
gadash.gviz.areaChart={type:"AreaChart",chartOptions:{pointSize:6,lineWidth:4,areaOpacity:0.1,legend:{position:"top",alignment:"start"},colors:["#058dc7"],hAxis:{format:"MMM d",gridlines:{count:3,color:"transparent"},baselineColor:"transparent"},vAxis:{gridlines:{color:"#efefef",logScale:"true",count:3},textPosition:"in"}}};gadash.gviz.pieChart={type:"PieChart",chartOptions:{legend:{position:"right",textStyle:{bold:"true",fontSize:13},alignment:"center",pieSliceText:"none"}}};
gadash.gviz.barChart={type:"BarChart",chartOptions:{legend:{position:"top",alignment:"start"},colors:["#058dc7","#d14836"],hAxis:{gridlines:{count:3,color:"#efefef"},minValue:0,baselineColor:"transparent"},vAxis:{gridlines:{color:"transparent"},count:3,textPosition:"in"}}};
gadash.gviz.columnChart={type:"ColumnChart",chartOptions:{legend:{position:"top",alignment:"start"},colors:["#058dc7","#d14836"],hAxis:{gridlines:{count:3,color:"transparent"},baselineColor:"transparent"},vAxis:{gridlines:{color:"#efefef",count:3},minValue:0,textPosition:"in"},chartArea:{width:"90%"}}};gadash.ui=gadash.ui||{};gadash.ui.acct=gadash.ui.acct||{};gadash.ui.acct.cache={};gadash.getProfileSelect=function(a){return new gadash.ui.ProfileSelect(a)};gadash.ui.ProfileSelect=function(a){this.elementId=a;this.selected={};this.isFromLoad=!1;this.initView(a);gadash.isLoaded?this.initLoad():gadash.util.pubsub.subscribe(gadash.util.pubsub.libsLoaded,gadash.util.bindMethod(this,this.initLoad))};
gadash.ui.ProfileSelect.prototype.initLoad=function(){var a=gadash.util.load(this.elementId);a&&(this.selected=a,this.isFromLoad=!0);this.addChangeHandler("acct-select");this.addChangeHandler("property-select");this.addChangeHandler("profile-select");this.loadAccounts()};gadash.ui.ProfileSelect.prototype.addChangeHandler=function(a){this.getElement(this.getId_(a)).addEventListener("change",gadash.util.bindMethod(this,this.getChangeHandler(a)))};
gadash.ui.ProfileSelect.prototype.getElement=function(a){a=a||!1;var b=gadash.util.getElement(this.elementId);a&&(b=b.querySelector("#"+a));return b};gadash.ui.ProfileSelect.prototype.getTableId=function(){return"ga:"+this.selected.profileId};gadash.ui.ProfileSelect.prototype.getTableIdConfig=function(){return{query:{ids:this.getTableId()}}};gadash.ui.ProfileSelect.prototype.getId_=function(a){return gadash.util.getElement(this.elementId).id+"-"+a};
gadash.ui.ProfileSelect.prototype.initView=function(){gadash.util.getElement(this.elementId).innerHTML=['<div style="margin-top:5px">Select an account: <select id="',this.getId_("acct-select"),'"><option>Loading...</option></select></div><div style="margin-top:5px">Select a property: <select id="',this.getId_("property-select"),'"><option>Loading...</option></select></div><div style="margin-top:5px">Select a profile: <select id="',this.getId_("profile-select"),'"><option>Loading...</option></select></div>'].join("")};
gadash.ui.ProfileSelect.prototype.loadAccounts=function(){gapi.client.analytics.management.accounts.list().execute(gadash.util.bindMethod(this,this.handleAccounts))};gadash.ui.ProfileSelect.prototype.handleAccounts=function(a){this.isError(a)||(this.isFromLoad||(this.selected.accountId=a.items[0].id),gadash.ui.acct.sortResults(a),this.getElement(this.getId_("acct-select")).innerHTML=gadash.ui.acct.getOptionsFromResults(a,this.selected.accountId),this.loadProperties())};
gadash.ui.ProfileSelect.prototype.isError=function(a){if(a.error)return gadash.util.displayError("There was an API error in the account picker: "+a.error.message),!0;if(!a.items||!a.items.length){switch(a.kind){case "analytics#account":this.getElement(this.getId_("acct-select")).innerHTML=gadash.ui.acct.getOption("none","No account found");case "analytics#webproperty":this.getElement(this.getId_("acct-select")).innerHTML=gadash.ui.acct.getOption("none","No properties found");case "analytics#profile":this.getElement(this.getId_("acct-select")).innerHTML=
gadash.ui.acct.getOption("none","No profiles found")}return!0}return!1};gadash.ui.ProfileSelect.prototype.getChangeHandler=function(a){return function(b){switch(a){case "acct-select":this.selected.accountId=b.target.value;this.loadProperties();break;case "property-select":this.selected.propertyId=b.target.value;this.loadProfiles();break;case "profile-select":this.selected.profileId=b.target.value,gadash.util.save(this.elementId,this.selected)}}};
gadash.ui.ProfileSelect.prototype.loadProperties=function(){var a=this.loadFromCache(this.selected.accountId);a?this.handleProperties(a):gapi.client.analytics.management.webproperties.list({accountId:this.selected.accountId}).execute(gadash.util.bindMethod(this,this.handleProperties))};
gadash.ui.ProfileSelect.prototype.handleProperties=function(a){this.isError(a)||(gadash.ui.acct.sortResults(a),this.saveToCache(this.selected.accountId,a),this.isFromLoad||(this.selected.propertyId=a.items[0].id),this.getElement(this.getId_("property-select")).innerHTML=gadash.ui.acct.getOptionsFromResults(a,this.selected.propertyId),this.loadProfiles())};
gadash.ui.ProfileSelect.prototype.loadProfiles=function(){var a=this.loadFromCache(this.selected.propertyId);a?this.handleProfiles(a):gapi.client.analytics.management.profiles.list({accountId:this.selected.accountId,webPropertyId:this.selected.propertyId}).execute(gadash.util.bindMethod(this,this.handleProfiles))};
gadash.ui.ProfileSelect.prototype.handleProfiles=function(a){this.isError(a)||(gadash.ui.acct.sortResults(a),this.saveToCache(this.selected.propertyId,a),this.isFromLoad||(this.selected.profileId=a.items[0].id),this.getElement(this.getId_("profile-select")).innerHTML=gadash.ui.acct.getOptionsFromResults(a,this.selected.profileId),gadash.util.save(this.elementId,this.selected),this.isFromLoad=!1)};
gadash.ui.acct.getOptionsFromResults=function(a,b){for(var c=b||"",d=[],f=0,g;g=a.items[f];++f){var e=g.id==c?!0:!1;0!=g.profileCount&&d.push(gadash.ui.acct.getOption(g.id,g.name,e))}return d.join("")};gadash.ui.acct.getOption=function(a,b,c){return['<option value="',a,'"',c?" selected ":"",">",gadash.util.htmlEscape(b),"</option>"].join("")};
gadash.ui.ProfileSelect.prototype.saveToCache=function(a,b){gadash.ui.acct.cache[this.elementId]=gadash.ui.acct.cache[this.elementId]||{};gadash.ui.acct.cache[this.elementId][a]=b};gadash.ui.ProfileSelect.prototype.loadFromCache=function(a){if(gadash.ui.acct.cache[this.elementId])return gadash.ui.acct.cache[this.elementId][a]};gadash.ui.acct.sortResults=function(a){a.items.sort(function(a,c){return a.name.toLowerCase()<c.name.toLowerCase()?-1:a.name.toLowerCase()>c.name.toLowerCase()?1:0})};gadash.getGaComponent=function(a){return(new gadash.GaComponent).add(a)};gadash.GaComponent=function(){this.objects_=[];return this};gadash.GaComponent.prototype.add=function(a){if("array"==gadash.util.getType(a))for(var b=0,c;c=a[b];++b)this.add(c);else this.objects_.push(a);return this};gadash.GaComponent.prototype.getConfig=function(){for(var a={},b=0,c;c=this.objects_[b];++b)c.getConfig&&gadash.util.extend(c.getConfig(),a);return a};
gadash.GaComponent.prototype.setConfig=function(a){for(var b=0,c;c=this.objects_[b];++b)c.setConfig&&c.setConfig(a);return this};gadash.GaComponent.prototype.execute=function(a){var b=this.getConfig();a&&gadash.util.extend(a,b);a=0;for(var c;c=this.objects_[a];++a)c.execute&&c.execute(b);return this};
